<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chí Dũng Club - Tiến Lên Miền Nam</title>
<script src="/socket.io/socket.io.js"></script>
<style>
  body{
    margin:0;
    background: radial-gradient(circle at center, #0a3d1a, #071a0a);
    color:#fff;
    font-family:'Segoe UI',Arial,sans-serif;
    overflow:hidden;
    height:100vh;
  }
  #joinForm{text-align:center;padding-top:20vh;background:url('https://i.imgur.com/8G5kZ8k.jpg') center/cover}
  input{padding:16px 24px;width:280px;margin:12px;border-radius:16px;border:none;font-size:20px;box-shadow:0 4px 15px rgba(0,0,0,0.5)}
  button{padding:18px 60px;background:#ffd700;color:#000;border:none;border-radius:16px;font-weight:bold;font-size:24px;cursor:pointer;box-shadow:0 6px 20px rgba(0,0,0,0.6)}
  
  #gameArea{display:none;width:100vw;height:100vh;position:relative;background:url('https://i.imgur.com/8G5kZ8k.jpg') center/cover}
  .table{
    position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);
    width:800px;height:560px;
    background:radial-gradient(ellipse at center,#1e6b3a 0%,#0f3d1f 100%);
    border-radius:50%;box-shadow:0 0 80px rgba(0,255,0,0.6), inset 0 0 60px rgba(0,0,0,0.8);
    border:8px solid #ffd700;
  }
  .hand{position:absolute;display:flex;justify-content:center;align-items:center}
  #hand0{bottom:15px;left:50%;transform:translateX(-50%);gap:6px;padding:0 20px;max-width:96vw;overflow-x:auto;scrollbar-width:none}
  #hand0::-webkit-scrollbar{display:none}
  #hand1{top:20px;right:40px;flex-direction:column;gap:4px}
  #hand2{top:20px;left:50%;transform:translateX(-50%);gap:6px}
  #hand3{top:20px;left:40px;flex-direction:column;gap:4px}

  .card{
    width:66px;height:96px;background:#fff;color:#000;border-radius:12px;
    border:3px solid #000;box-shadow:0 8px 20px rgba(0,0,0,0.8);
    position:relative;cursor:pointer;transition:all .3s;font-weight:bold;
    background-image:url('https://i.imgur.com/JQpY6sZ.png');background-size:100% 100%;
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    font-size:18px;
  }
  .card.he{color:red}
  .card.selected{transform:translateY(-45px) scale(1.05);box-shadow:0 30px 50px gold;z-index:99}
  .card .rank{font-size:28px;line-height:1}
  .card .suit{font-size:36px;line-height:1;margin-top:-8px}
  .card .club-logo{
    position:absolute;bottom:4px;right:4px;font-size:10px;color:#ffd700;
    font-weight:bold;text-shadow:1px 1px 2px #000;
  }
  .card.back{
    background:#0f3d1f url('https://i.imgur.com/3k5vZ8m.png') center/cover;
    border:3px solid #ffd700;
  }

  #playedArea{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:420px;height:260px;display:flex;flex-wrap:wrap;gap:18px;justify-content:center;align-items:center}
  .played-card{width:82px;height:116px;background:#fff;color:#000;border-radius:14px;box-shadow:0 15px 35px rgba(0,0,0,0.9);transform:rotate(var(--r));font-size:36px;font-weight:bold;display:flex;flex-direction:column;align-items:center;justify-content:center}
  .played-card.he{color:red}
  .played-card .rank{font-size:40px}
  .played-card .suit{font-size:48px;margin-top:-10px}

  .name{position:absolute;font-weight:bold;font-size:20px;text-shadow:0 0 10px gold}
  #name0{bottom:110px;left:50%;transform:translateX(-50%)}
  #name1{top:100px;right:50px}#name2{top:50px;left:50%;transform:translateX(-50%)}
  #name3{top:100px;left:50px}

  #status{position:absolute;top:20px;left:50%;transform:translateX(-50%);font-size:26px;font-weight:bold;text-shadow:0 0 10px #fff}
  #readyBtn{
    position:absolute;bottom:90px;left:50%;transform:translateX(-50%);
    padding:20px 90px;background:#d32f2f;color:#fff;font-size:30px;border:none;border-radius:50px;
    box-shadow:0 10px 30px rgba(0,0,0,0.7);font-weight:bold;
  }
  #readyBtn.ready{background:#2e7d32}
  .controls{position:absolute;bottom:20px;left:50%;transform:translateX(-50%)}
  .controls button{padding:18px 60px;margin:0 25px;background:#ffd700;color:#000;font-weight:bold;border-radius:16px;font-size:22px}
  
  .logo{
    position:absolute;top:15px;left:20px;font-size:28px;font-weight:bold;color:#ffd700;
    text-shadow:0 0 15px gold, 0 0 30px orange;
    letter-spacing:2px;
  }
  @keyframes blink{0%,100%{opacity:1}50%{opacity:0.4}}
</style>
</head>
<body>

<div class="logo">CHÍ DŨNG CLUB</div>

<div id="joinForm">
  <h1 style="color:#ffd700;font-size:60px;text-shadow:0 0 30px gold;margin-bottom:50px">CHÍ DŨNG CLUB</h1>
  <input id="roomId" value="123" placeholder="ID phòng"><br>
  <input id="playerName" placeholder="Tên anh em"><br><br>
  <button onclick="joinRoom()">VÀO PHÒNG NGAY</button>
</div>

<div id="gameArea">
  <div id="status">Phòng 123 • 0/4 anh em</div>
  <div class="table">
    <div id="name2" class="name"></div><div id="hand2" class="hand"></div>
    <div id="name1" class="name"></div><div id="hand1" class="hand"></div>
    <div id="playedArea"><div style="color:#aaa;font-size:42px">Bàn bài trống</div></div>
    <div id="name3" class="name"></div><div id="hand3" class="hand"></div>
    <div id="name0" class="name">Bạn</div><div id="hand0" class="hand"></div>
  </div>
  <button id="readyBtn" onclick="toggleReady()">SẴN SÀNG</button>
  <div class="controls">
    <button id="playBtn" onclick="playSelected()" disabled>ĐÁNH</button>
    <button id="skipBtn" onclick="skipTurn()" disabled>BỎ QUA</button>
  </div>
</div>

<script>
let hand=[],selected=[],myIndex=-1,roomId='123',players=[],readyList=[],gameStarted=false;
let cardsLeft=[0,0,0,0];
const socket=io();

const suitMap = {S:'spade',H:'heart',D:'diamond',C:'club'};
const suitSymbol = {spade:'spade',heart:'heart,diamond:'diamond',club:'club'};

function getCardHTML(c){
  const rank = c.slice(0,-1).replace('10','10');
  const suit = c.slice(-1);
  const color = (suit==='H'||suit==='D')?'he':'';
  return `<div class="card ${color}" onclick="toggle('${c}')">
    <div class="rank">${rank}</div>
    <div class="suit">${suitSymbol[suit]}</div>
    <div class="club-logo">CHÍ DŨNG</div>
  </div>`;
}

function joinRoom(){
  roomId=document.getElementById('roomId').value.trim()||'123';
  const name=document.getElementById('playerName').value.trim()||'Anh Em';
  socket.emit('joinRoom',{roomId,playerName:name});
}

// Tất cả socket event giữ nguyên như file trước, chỉ đổi renderHands():
function renderHands(){
  document.getElementById('hand0').innerHTML = hand.map(c=>getCardHTML(c)).join('');
  for(let i=1;i<=3;i++){
    const idx = (myIndex + i) % 4;
    const cnt = gameStarted ? cardsLeft[idx] : 0;
    document.getElementById(`hand${i}`).innerHTML = Array(cnt).fill('<div class="card back"></div>').join('');
  }
  document.getElementById('playBtn').disabled = selected.length===0 || myIndex!==currentTurn;
}

// Các hàm khác (toggle, playSelected, updateTurn...) giữ nguyên 100% như file trước
// ... (giữ nguyên toàn bộ script từ file trước, chỉ thay renderHands() như trên)
</script>
</body>
</html>
